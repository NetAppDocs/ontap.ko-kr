---
permalink: consistency-groups/index.html 
sidebar: sidebar 
keywords: consistency group protection, application protection, metrocluster, write-order, application management, workload 
summary: 일관성 그룹은 단일 유닛으로 구성된 볼륨 모음으로, 여러 볼륨 또는 LUN에 걸쳐 워크로드를 쉽게 관리하고 보호할 수 있도록 합니다. 
---
= 일관성 그룹 개요
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
정합성 보장 그룹은 단일 유닛으로 관리되는 볼륨의 모음입니다. ONTAP에서 일관성 그룹을 사용하면 여러 볼륨에 걸쳐 있는 애플리케이션 워크로드를 손쉽게 관리하고 보호할 수 있습니다.

일관성 그룹을 사용하면 스토리지 관리를 간소화할 수 있습니다. 20개의 LUN을 아우르는 중요한 데이터베이스가 있다고 상상해 보십시오. LUN을 개별적으로 관리하거나, LUN을 단일 데이터 세트로 간주하여 단일 일관성 그룹으로 그룹화할 수 있습니다.

정합성 보장 그룹은 애플리케이션 워크로드 관리를 용이하게 하여 로컬 및 원격 보호 정책을 손쉽게 관리하고 특정 시점의 볼륨 컬렉션에 대한 충돌 시에도 정합성이 보장되거나 애플리케이션 정합성이 보장되는 Snapshot 복사본을 동시에 제공합니다. 일관성 그룹의 스냅샷을 사용하면 전체 애플리케이션 워크로드를 복원할 수 있습니다.



== 피처

일관성 그룹은 프로토콜(NAS, SAN 또는 NVMe)에 관계없이 모든 FlexVol 볼륨을 지원하며, ONTAP REST API를 통해 또는 System Manager의 * 스토리지 > 일관성 그룹 * 메뉴 항목에서 관리할 수 있습니다.

일관성 그룹은 개별 엔터티 또는 계층적 관계로 존재할 수 있습니다. 개별 정합성 보장 그룹은 볼륨의 모음입니다. 볼륨에는 고유한 볼륨 세부 스냅샷 정책이 있을 수 있습니다. 또한 볼륨이 연결된 정합성 보장 그룹에 고유한 스냅샷 정책이 있을 수 있습니다. 일관성 그룹에는 전체 일관성 그룹을 복구하는 데 사용할 수 있는 하나의 SM-BC(SnapMirror Business Continuity) 관계 및 공유 SM-BC 정책만 있을 수 있습니다.

다음 다이어그램에서는 개별 일관성 그룹을 사용하는 방법을 보여 줍니다. 에서 호스팅되는 애플리케이션의 데이터입니다 `SVM1` 두 볼륨 확장: `vol1` 및 `vol2`. 정합성 보장 그룹의 스냅샷 정책은 15분마다 데이터의 스냅샷을 캡처합니다.

image:../media/consistency-group-single-diagram.gif["구성 볼륨 및 로컬 스냅샷 정책이 있는 단일 일관성 그룹의 다이어그램"]

애플리케이션 워크로드가 클수록 여러 개의 일관성 그룹이 필요할 수 있습니다. 이 경우 단일 일관성 그룹이 부모 일관성 그룹의 하위 구성요소가 되는 계층적 일관성 그룹을 생성할 수 있습니다. 상위 일관성 그룹에는 최대 5개의 하위 일관성 그룹이 포함될 수 있습니다. 개별 정합성 보장 그룹과 마찬가지로 원격 SM-BC 보호 정책을 정합성 보장 그룹(상위 및 하위)의 전체 구성에 적용하여 애플리케이션 워크로드를 복구할 수 있습니다.

다음 예제에서는 응용 프로그램이 에 호스팅됩니다 `SVM1`. 관리자가 상위 일관성 그룹을 생성했습니다. `SVM1_app`다음과 같은 두 개의 하위 정합성 보장 그룹이 포함됩니다. `SVM1appDataCG` 을 참조하십시오 `SVM1app_logCG` 를 클릭합니다. 각 하위 정합성 보장 그룹에는 고유한 스냅샷 정책이 있습니다. 의 볼륨 스냅샷입니다 `SVM1appDataCG` 15분마다 수행됩니다. 의 스냅샷 `SVM1app_logCG` 매시간 촬영됩니다. 부모 일관성 그룹 `SVM1_app` 재난 발생 시 지속적인 서비스를 보장하기 위해 데이터를 복제하는 SM-BC 정책을 사용합니다.

image:../media/consistency-group-nested-diagram.gif["연결된 볼륨이 있는 중첩된 일관성 그룹의 다이어그램"]

ONTAP 9.12.1부터 정합성 보장 그룹이 지원됩니다 xref:clone-task.html[클론 복제] 를 사용하여 정합성 보장 구성 구성원을 수정합니다 xref:modify-task.html[볼륨 추가 또는 제거] System Manager 및 ONTAP REST API 모두에서 ONTAP 9.12.1부터 ONTAP REST API는 다음 기능도 지원합니다.

* 새 NFS 또는 SMB 볼륨 또는 NVMe 네임스페이스를 사용하여 일관성 그룹 생성
* 기존 일관성 그룹에 새 NFS 또는 SMB 볼륨 또는 NVMe 네임스페이스 추가


ONTAP REST API에 대한 자세한 내용은 를 참조하십시오 https://docs.netapp.com/us-en/ontap-automation/reference/api_reference.html#access-a-copy-of-the-ontap-rest-api-reference-documentation["ONTAP REST API 참조 설명서"].



== 보호

정합성 보장 그룹이 제공하는 이점:

* 스냅샷 정책을 통한 로컬 보호
* 를 통한 원격 보호 xref:../smbc/index.html[SnapMirror 비즈니스 연속성(SM-BC)] 또는 <<mcc>>


일관성 그룹을 생성해도 보호가 자동으로 설정되지는 않습니다. 정합성 보장 그룹을 생성하거나 생성한 후에 로컬 및/또는 원격 보호 정책을 설정할 수 있습니다.

일관성 그룹에 대한 로컬 보호를 구성하려면 를 참조하십시오 link:protect-task.html["일관성 그룹 보호"].

원격 보호를 활용하려면 에 대한 요구 사항을 충족해야 합니다 xref:../smbc/smbc_plan_prerequisites.html#licensing[SnapMirror 비즈니스 연속성 구현].


NOTE: NAS 액세스를 위해 마운트된 볼륨에 SM-BC 관계를 설정할 수 없습니다.

ONTAP 9.11.1부터 정합성 보장 그룹도 지원합니다 link:protect-task.html#two-phase-CG-snapshot-creation["2단계 정합성 보장 그룹 스냅샷 생성"].



== 응용 프로그램 및 구성 요소 태그

ONTAP 9.12.1부터 정합성 보장 그룹은 구성 요소와 애플리케이션 태깅을 지원합니다. 애플리케이션 및 구성 요소 태그는 관리 툴로서 일관성 그룹의 다양한 워크로드를 필터링하고 식별할 수 있습니다.

태그에는 두 가지 유형이 있습니다.

* ** 응용 프로그램 태그**: 이러한 태그는 개별 및 부모 일관성 그룹에 적용됩니다. 애플리케이션 태그는 MongoDB, Oracle, SQL Server와 같은 워크로드에 대한 레이블링을 제공합니다. 일관성 그룹의 기본 애플리케이션 태그는 기타입니다.
* ** 구성 요소 태그**: 계층적인 정합성 보장 그룹의 하위 요소에는 응용 프로그램 태그 대신 구성 요소 태그가 있습니다. 구성 요소 태그에 대한 옵션은 "데이터", "로그" 또는 "기타"입니다. 기본값은 기타 입니다.


일관성 그룹을 생성하거나 일관성 그룹을 생성한 후에 태그를 적용할 수 있습니다. 정합성 보장 그룹에 SM-BC 관계가 있는 경우 * Other * 를 애플리케이션 또는 구성 요소 태그로 사용해야 합니다.



== MetroCluster 구성의 일관성 그룹

ONTAP 9.11.1부터 MetroCluster 구성 내에서 클러스터의 새 볼륨에 정합성 보장 그룹을 프로비저닝할 수 있습니다. 이러한 볼륨은 미러링된 Aggregate에 프로비저닝됩니다.

볼륨이 프로비저닝되면 미러링된 Aggregate와 미러링되지 않은 애그리게이트 간에 일관성 그룹에 연결된 볼륨을 이동할 수 있습니다. 따라서 일관성 그룹에 연결된 볼륨은 미러링된 애그리게이트, 미러링되지 않은 애그리게이트 또는 둘 다에 위치할 수 있습니다. 일관성 그룹에 연결된 볼륨이 포함된 미러링된 애그리게이트를 수정하여 미러링되지 않은 상태로 만들 수 있습니다. 마찬가지로, 정합성 보장 그룹과 연결된 볼륨이 포함된 미러링되지 않은 애그리게이트를 수정하여 미러링을 활성화할 수 있습니다.

모든 일관성 그룹 스냅샷을 비롯하여 미러링된 애그리게이트 및 해당 스냅샷에 배치된 일관성 그룹 관련 볼륨이 원격 사이트(사이트 B)에 복제됩니다. 사이트 B에 있는 볼륨의 컨텐츠는 정합성 보장 그룹 의미 체계를 준수합니다. ONTAP 9.11.1 이상을 실행하는 클러스터의 일관성 그룹 스냅샷 REST API 및 System Manager를 사용하여 복제된 일관성 그룹 스냅샷에 액세스할 수 있습니다.

일관성 그룹에 연결된 볼륨 중 일부 또는 모두가 현재 액세스할 수 없는 미러링되지 않은 애그리게이트에 있는 경우, 일관성 그룹의 가져오기 또는 삭제 작업은 로컬 볼륨 또는 호스팅 애그리게이트가 오프라인 상태인 것처럼 동작합니다.



=== 정합성 보장 그룹 구성 복제

사이트 B에서 ONTAP 9.10.1 이하 버전을 실행하는 경우 미러링된 Aggregate에 있는 일관성 그룹과 연결된 볼륨만 사이트 B에 복제됩니다 정합성 보장 그룹 구성은 두 사이트가 모두 ONTAP 9.11.1 이상을 실행하는 경우 사이트 B에만 복제됩니다. 사이트 B를 ONTAP 9.11.1로 업그레이드한 후 사이트 A의 정합성 보장 그룹에 대한 모든 관련 볼륨이 미러링된 Aggregate에 배치된 데이터가 사이트 B에 복제됩니다



== 업그레이드 고려 사항

ONTAP 9.8 및 9.9.1에서 SM-BC로 생성된 정합성 보장 그룹은 ONTAP 9.10.1로 업그레이드할 때 System Manager의 * 스토리지 > 일관성 그룹 * 또는 ONTAP REST API에서 자동으로 업그레이드되어 관리가 가능합니다. 업그레이드에 대한 자세한 내용은 를 참조하십시오 link:../smbc/smbc_admin_upgrade_and_revert_considerations.html["SM-BC 업그레이드 및 되돌리기 고려 사항"].

ONTAP REST API를 사용하여 생성한 정합성 보장 그룹 스냅샷은 System Manager의 정합성 보장 그룹 인터페이스와 정합성 보장 그룹 API 엔드포인트를 통해 관리할 수 있습니다.


NOTE: ONTAPI 명령으로 생성된 스냅샷입니다 `cg-start` 및 `cg-commit` 에서는 일관성 그룹 스냅샷으로 인식되지 않으므로 ONTAP API의 시스템 관리자의 일관성 그룹 인터페이스 또는 일관성 그룹 엔드포인트를 통해 관리할 수 없습니다.



== 일관성 그룹에 대해 자세히 알아보십시오

video::j0jfXDcdyzE[youtube,width=848,height=480]
.추가 정보
* link:https://docs.netapp.com/us-en/ontap-automation/["ONTAP 자동화 문서"^]

