---
permalink: consistency-groups/index.html 
sidebar: sidebar 
keywords: consistency groups, consistency group protection, application protection 
summary: ONTAP에서는 계층적 일관성 그룹, 단일 일관성 그룹, 보호 정책 및 업그레이드 고려 사항을 비롯한 일관성 그룹을 사용할 수 있습니다. 
---
= 일관성 그룹 개요
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
정합성 보장 그룹은 여러 볼륨에 걸쳐 있는 애플리케이션 워크로드에 대해 쓰기 순서 정합성을 보장하는 볼륨 모음입니다.

정합성 보장 그룹은 애플리케이션 워크로드 관리를 용이하게 하여 로컬 및 원격 보호 정책을 손쉽게 관리하고 특정 시점의 볼륨 컬렉션에 대한 충돌 시에도 정합성이 보장되거나 애플리케이션 정합성이 보장되는 Snapshot 복사본을 동시에 제공합니다. 일관성 그룹의 스냅샷을 사용하면 전체 애플리케이션 워크로드를 복원할 수 있습니다.

일관성 그룹은 프로토콜(NAS, SAN 또는 NVMe)에 관계없이 모든 FlexVol 볼륨을 지원하며, ONTAP REST API를 통해 또는 System Manager의 * 스토리지 > 일관성 그룹 * 메뉴 항목에서 관리할 수 있습니다.

일관성 그룹은 자체 또는 계층적 관계에 있을 수 있습니다. 개별 정합성 보장 그룹은 볼륨의 모음입니다. 볼륨에는 고유한 볼륨 세부 스냅샷 정책이 있을 수 있습니다. 또한 볼륨이 연결된 정합성 보장 그룹에 고유한 스냅샷 정책이 있을 수 있습니다. 정합성 보장 그룹에는 전체 정합성 보장 그룹을 복구하는 데 사용할 수 있는 SM-BC 관계 및 공유 SM-BC 정책이 하나만 있을 수 있습니다.

image:../media/consistency-group-single-diagram.gif["구성 볼륨 및 로컬 스냅샷 정책이 있는 단일 일관성 그룹의 다이어그램"]

애플리케이션 워크로드가 클수록 여러 개의 일관성 그룹이 필요할 수 있습니다. 이 경우 여러 일관성 그룹을 계층적 관계에 배치할 수 있습니다. 이 구성에서는 단일 일관성 그룹이 부모 일관성 그룹의 하위 구성요소가 됩니다. 상위 일관성 그룹에는 최대 5개의 하위 일관성 그룹이 포함될 수 있습니다. 개별 정합성 보장 그룹과 마찬가지로 원격 SM-BC 보호 정책을 정합성 보장 그룹(상위 및 하위)의 전체 구성에 적용하여 애플리케이션 워크로드를 복구할 수 있습니다.

image:../media/consistency-group-nested-diagram.gif["연결된 볼륨이 있는 중첩된 일관성 그룹의 다이어그램"]



== 보호

일관성 그룹은 스냅샷 정책을 통해 SM-BC(SnapMirror Business Continuity) 및 로컬 보호를 통해 원격 보호를 제공합니다. 원격 보호를 활용하려면 에 대한 요구 사항을 충족해야 합니다 xref:../smbc/smbc_plan_prerequisites.html#licensing[SnapMirror 비즈니스 연속성 구현]. 기본적으로 정합성 보장 그룹에는 보호 정책이 설정되어 있지 않으며 정책이 선택되어 있지 않으면 데이터를 보호하지 않습니다. 을 참조하십시오 link:protect-task.html[""정합성 보장 그룹 보호""] 를 참조하십시오.


NOTE: NAS 액세스를 위해 마운트된 볼륨에 SM-BC 관계를 설정할 수 없습니다.

ONTAP 9.11.1부터는 의 정합성 보장 그룹에 대한 추가 지원이 제공됩니다 link:protect-task.html#two-phase-CG-snapshot-creation["2단계 정합성 보장 그룹 스냅샷 생성"].



== MetroCluster 구성의 일관성 그룹

ONTAP 9.11.1부터 MetroCluster 구성 내에서 클러스터의 새 볼륨에 정합성 보장 그룹을 프로비저닝할 수 있습니다. 이러한 볼륨은 미러링된 Aggregate에 프로비저닝됩니다.

볼륨이 프로비저닝되면 미러링된 Aggregate와 미러링되지 않은 애그리게이트 간에 일관성 그룹에 연결된 볼륨을 이동할 수 있습니다. 따라서 이러한 애그리게이트는 미러링된 애그리게이트, 미러링되지 않은 애그리게이트 또는 둘 다에 위치할 수 있습니다. 일관성 그룹에 연결된 볼륨이 포함된 미러링된 애그리게이트를 수정하여 미러링되지 않은 상태로 만들 수 있습니다. 마찬가지로, 정합성 보장 그룹과 연결된 볼륨이 포함된 미러링되지 않은 애그리게이트를 수정하여 미러링을 활성화할 수 있습니다.

모든 일관성 그룹 스냅샷을 비롯하여 미러링된 애그리게이트 및 해당 스냅샷에 배치된 일관성 그룹 관련 볼륨이 원격 사이트(사이트 B)에 복제됩니다. 사이트 B에 있는 볼륨의 컨텐츠는 정합성 보장 그룹 의미 체계를 준수합니다. ONTAP 9.11.1 이상을 실행하는 클러스터의 일관성 그룹 스냅샷 REST API 및 System Manager를 사용하여 복제된 일관성 그룹 스냅샷에 액세스할 수 있습니다.

일관성 그룹에 연결된 볼륨 중 일부 또는 모두가 현재 액세스할 수 없는 미러링되지 않은 애그리게이트에 있는 경우, 일관성 그룹의 가져오기 또는 삭제 작업은 로컬 볼륨 또는 호스팅 애그리게이트가 오프라인 상태인 것처럼 동작합니다.



=== 정합성 보장 그룹 구성 복제

사이트 B에서 ONTAP 9.10.1 이하 버전을 실행하는 경우 미러링된 Aggregate에 있는 일관성 그룹과 연결된 볼륨만 사이트 B에 복제됩니다 정합성 보장 그룹 구성은 두 사이트에서 ONTAP 9.11.1 이상을 실행하는 경우에만 사이트 B에 복제됩니다. 사이트 B를 ONTAP 9.11.1로 업그레이드한 후 사이트 A의 정합성 보장 그룹에 대한 모든 관련 볼륨이 미러링된 Aggregate에 배치된 데이터는 사이트 B에 복제됩니다



== 업그레이드 고려 사항

ONTAP 9.8 및 9.9.1에서 SM-BC로 생성된 정합성 보장 그룹은 ONTAP 9.10.1로 업그레이드할 때 System Manager의 * 스토리지 > 일관성 그룹 * 또는 ONTAP REST API에서 자동으로 업그레이드되어 관리가 가능합니다. 업그레이드에 대한 자세한 내용은 를 참조하십시오 link:../smbc/smbc_admin_upgrade_and_revert_considerations.html["SM-BC 업그레이드 및 되돌리기 고려 사항"].

ONTAP REST API로 생성된 정합성 보장 그룹 스냅샷은 시스템 관리자의 정합성 보장 그룹 인터페이스와 정합성 보장 그룹 API 엔드포인트를 통해 관리할 수 있습니다.

ONTAPI 명령인 CG-start와 CG-commit으로 생성된 스냅샷은 정합성 보장 그룹 스냅샷으로 인식되지 않으므로 ONTAP API의 정합성 보장 그룹 인터페이스 또는 정합성 보장 그룹 엔드포인트를 통해 관리할 수 없습니다.



== 일관성 그룹 개체 제한

|===


| 일관성 그룹 | 범위 | 최소 | 최대 


| 정합성 보장 그룹 수입니다 | 클러스터 | 0 | 클러스터의 최대 볼륨 수와 동일합니다 


| 상위 일관성 그룹의 수입니다 | 클러스터 | 0 | 클러스터의 최대 볼륨 수와 동일합니다 


| 개별 및 상위 일관성 그룹의 수입니다 | 클러스터 | 0 | 클러스터의 최대 볼륨 수와 동일합니다 


| 일관성 그룹 | 클러스터의 최대 볼륨 수와 동일합니다 | 1 | 80 


| 상위 일관성 그룹의 하위 볼륨에 있는 볼륨 수입니다 | 부모 일관성 그룹 | 1 | 80 


| 하위 일관성 그룹의 볼륨 수입니다 | 하위 일관성 그룹 | 1 | 80 


| 부모 일관성 그룹에 있는 하위 일관성 그룹의 수입니다 | 부모 일관성 그룹 | 1 | 5 
|===
SM-BC를 사용하는 경우 을 참조하십시오 link:../smbc/smbc_plan_additional_restrictions_and_limitations.html#volumes["SM-BC 제한 및 제한 사항"].



== 일관성 그룹에 대해 자세히 알아보십시오

video::j0jfXDcdyzE[youtube,width=848,height=480]