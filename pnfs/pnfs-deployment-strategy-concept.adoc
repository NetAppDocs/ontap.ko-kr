---
permalink: pnfs/pnfs-deployment-strategy-concept.html 
sidebar: sidebar 
keywords: tr-4063, pnfs, deployment, strategy, configuration, traditional nfs, benefits, technical report 
summary: 기존 NFS의 과제와 pNFS가 이를 해결하는 방식을 이해하면 효과적인 pNFS 배포를 계획하는 데 도움이 됩니다. 
---
= ONTAP 에서의 pNFS 배포 전략
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
pNFS는 메타데이터와 데이터 경로를 분리하고, 데이터 지역화를 제공하며, 병렬 작업을 가능하게 하여 기존 NFS를 개선하기 위해 도입되었습니다.



== 기존 NFS의 과제와 pNFS의 이점

다음 표는 기존 NFS의 문제점을 보여주고 ONTAP 의 pNFS가 이를 어떻게 해결하는지 설명합니다.

[cols="40,60"]
|===
| 도전 | pNFS의 이점 


| *메타데이터와 데이터의 동일한 경로* 기존 NFS에서는 메타데이터와 데이터가 동일한 경로를 통과하므로 네트워크와 CPU가 모두 포화 상태가 될 수 있습니다. 단일 경로가 클러스터의 단일 하드웨어 노드에 연결되기 때문입니다. 많은 사용자가 동일한 NFS 내보내기에 액세스하려고 시도하는 경우 이러한 문제는 더욱 악화됩니다. | *메타데이터와 데이터 경로가 분리되어 있으며, 데이터 경로가 병렬화되어 있습니다* NFS 트래픽에 대한 메타데이터와 데이터 경로를 분리하고 데이터 경로에 대해 여러 네트워크 경로를 제공함으로써 ONTAP 클러스터에서 CPU 및 네트워크 리소스가 극대화되어 워크로드에 대한 확장성이 향상됩니다. 


| *작업 부하 분산 과제* ONTAP NAS 클러스터에서는 최대 24개의 노드를 가질 수 있으며, 각 노드는 고유한 데이터 볼륨과 네트워크 인터페이스 세트를 가질 수 있습니다. 각 볼륨은 자체 워크로드 또는 워크로드의 하위 집합을 호스팅할 수 있으며 FlexGroup 볼륨을 사용하면 간소화를 위해 해당 워크로드가 단일 네임스페이스에 액세스하는 여러 노드에 존재할 수 있습니다. 클라이언트가 NFS 내보내기를 마운트하면 네트워크 트래픽이 단일 노드에 설정됩니다. 액세스하는 데이터가 클러스터 내의 별도 노드에 있는 경우 원격 트래픽이 발생하여 작업 부하에 지연이 발생하고 관리가 복잡해질 수 있습니다. | *데이터 구조에 대한 로컬 병렬 경로* pNFS는 메타데이터에서 데이터 경로를 분리하고 클러스터 내 볼륨의 로컬성에 따라 여러 병렬 데이터 경로를 제공하므로 클러스터 내 네트워크 트래픽의 거리를 줄이고 클러스터 내 여러 하드웨어 리소스를 활용하여 대기 시간을 줄일 수 있습니다. 또한 ONTAP 의 pNFS는 데이터 트래픽을 자동으로 리디렉션하므로 관리자가 여러 개의 내보내기 경로와 위치를 관리할 필요성이 줄어듭니다. 


| *NFS 마운트 지점의 재배치* 마운트 지점이 설정된 후에는 볼륨을 마운트 해제하고 다시 마운트하는 것이 방해가 될 수 있습니다. ONTAP 노드 간에 네트워크 인터페이스를 마이그레이션하는 기능을 제공하지만, 이로 인해 관리 오버헤드가 발생하고 NFSv4.x를 사용하는 상태 저장 NFS 연결에 방해가 됩니다. 마운트 지점을 이전하는 이유 중 일부는 데이터 지역성 문제와 관련이 있습니다. | *자동 경로 재배치* pNFS를 사용하면 NFS 서버는 네트워크 인터페이스와 볼륨의 위치 테이블을 유지 관리합니다. pNFS의 메타데이터 경로를 통해 클라이언트로부터 데이터 구조가 요청되면 서버는 클라이언트에 최적화된 네트워크 경로를 전달하고, 클라이언트는 해당 경로를 데이터 작업에 사용합니다. 이를 통해 작업 부하에 대한 관리 오버헤드가 크게 줄어들고 어떤 경우에는 성능이 향상될 수 있습니다. 
|===


== 구성 요구 사항

NetApp ONTAP 에서 pNFS를 구성하려면 다음이 필요합니다.

* pNFS를 지원하고 NFSv4.1 이상으로 마운트된 NFS 클라이언트
* ONTAP 의 NFS 서버에서 NFSv4.1이 활성화됨 (`nfs modify -v4.1 enabled`; 기본적으로 꺼짐)
* ONTAP 의 NFS 서버에서 pNFS가 활성화됨 (`nfs modify -v4.1-pnfs enabled`; 기본적으로 비활성화됨)
* 노드당 최소 하나의 네트워크 인터페이스가 NFS 클라이언트로 라우팅 가능
* NFSv4를 허용하는 내보내기 정책 및 규칙이 있는 SVM의 데이터 볼륨


image::pNFS_fig_020.png[pNFS 구성 요구 사항]

위의 구성 요구 사항을 충족하면 pNFS는 그 자체로 작동합니다.

.관련 정보
* link:../nfs-config/index.html["NFS 구성"]
* link:../nfs-admin/ontap-support-nfsv41-concept.html["NFSv4.1에 대한 ONTAP 지원"]
* link:pnfs-tuning-performance-concept.html#network-interface-connectivity["pNFS용 네트워크 인터페이스 연결"]

