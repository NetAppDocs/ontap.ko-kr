---
permalink: fabricpool/tiering-policies-concept.html 
sidebar: sidebar 
keywords: understanding, fabricpool, tiering, policies, types, modify, volume, clone, cloud migration 
summary: FabricPool 계층화 정책을 사용하면 데이터가 핫 또는 콜드 데이터가 될 때 계층 간에 데이터를 효율적으로 이동할 수 있습니다. 계층화 정책을 이해하면 스토리지 관리 요구 사항에 적합한 정책을 선택할 수 있습니다. 
---
= FabricPool 계층화 정책 정보
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
FabricPool 계층화 정책을 사용하면 데이터가 핫 또는 콜드 데이터가 될 때 계층 간에 데이터를 효율적으로 이동할 수 있습니다. 계층화 정책을 이해하면 스토리지 관리 요구 사항에 적합한 정책을 선택할 수 있습니다.



== FabricPool 계층화 정책의 유형입니다

FabricPool 계층화 정책은 FabricPool에 있는 볼륨의 사용자 데이터 블록이 핫(액티브) 또는 콜드(비활성)의 볼륨 ""온도""에 따라 클라우드 계층으로 이동되는지 여부를 결정합니다. 자주 접근하면 체적이 증가하고 자주 접근하지 않으면 체적이 감소합니다. 일부 계층화 정책에는 관련 계층화 최소 냉각 기간이 있는데, 이는 데이터를 "콜드"로 간주하고 클라우드 계층으로 이동하기 위해 FabricPool 볼륨의 사용자 데이터가 비활성 상태로 유지되는 시간을 설정합니다.

블록이 콜드 블록으로 식별되면 계층화할 수 있는 것으로 표시됩니다.  매일 백그라운드 계층화 검사에서 콜드 블록이 검색됩니다. 같은 볼륨에서 4KB의 블록이 충분히 수집되면 4MB 개체로 연결되고 볼륨 계층화 정책에 따라 클라우드 계층으로 이동됩니다.

[NOTE]
====
를 사용하는 볼륨의 데이터입니다 `all` 계층화 정책은 즉시 '콜드'으로 표시되며 가능한 한 빨리 클라우드 계층으로 계층화를 시작합니다. 일일 계층화 검사가 실행될 때까지 기다릴 필요가 없습니다.

====
를 사용할 수 있습니다 `volume object-store tiering show` FabricPool 볼륨의 계층화 상태를 확인하는 명령입니다. 자세한 내용은 를 참조하십시오 link:https://docs.netapp.com/us-en/ontap-cli-9131/["명령 참조"].

FabricPool 계층화 정책은 볼륨 레벨에서 지정됩니다. 다음 4가지 옵션을 사용할 수 있습니다.

* '스냅샷 전용' 계층화 정책(기본값)은 액티브 파일 시스템과 연결되지 않은 볼륨 Snapshot 복사본의 사용자 데이터 블록을 클라우드 계층으로 이동합니다.
+
계층화 최소 냉각 기간은 2일입니다. 볼륨 생성 및 볼륨 수정 명령의 고급 권한 수준에서 '-Tiering-Minimum-Cooling-Days' 매개 변수를 사용하여 계층화 최소 냉각 기간의 기본 설정을 수정할 수 있습니다. 유효한 값은 ONTAP 9.8 이상을 사용하여 2 ~ 183일입니다. 9.8 이전의 ONTAP 버전을 사용하는 경우 유효한 값은 2-63일입니다.

* ONTAP 9.4 이상 릴리즈에서만 지원되는 '자동' 계층화 정책은 스냅샷 복사본과 액티브 파일 시스템의 콜드 사용자 데이터 블록을 클라우드 계층으로 이동합니다.
+
기본 계층화 최소 냉각 기간은 31일이며 액티브 파일 시스템과 스냅샷 복사본 모두에 대해 전체 볼륨에 적용됩니다.

+
볼륨 생성 및 볼륨 수정 명령의 고급 권한 수준에서 '-Tiering-Minimum-Cooling-Days' 매개 변수를 사용하여 계층화 최소 냉각 기간의 기본 설정을 수정할 수 있습니다. 유효한 값은 2 ~ 183일입니다.

* 를 클릭합니다 `all` ONTAP 9.6 이상에서만 지원되는 계층화 정책은 액티브 파일 시스템과 스냅샷 복사본 모두의 모든 사용자 데이터 블록을 클라우드 계층으로 이동합니다. 이 대신 을 대체합니다 `backup` 계층화 정책:
+
를 클릭합니다 `all` 볼륨 계층화 정책은 정상적인 클라이언트 트래픽이 있는 읽기/쓰기 볼륨에서 사용하면 안 됩니다.

+
계층화 검사가 실행되는 즉시 데이터가 클라우드 계층을 이동하고 설정을 수정할 수 없기 때문에 계층화 최소 냉각 기간은 적용되지 않습니다.

* 를 클릭합니다 `none` 계층화 정책은 볼륨의 데이터를 성능 계층에 유지하고 콜드 데이터를 클라우드 계층으로 이동하지 않습니다.
+
계층화 정책을 으로 설정합니다 `none` 새로운 계층화를 방지합니다. 이전에 클라우드 계층으로 이동된 볼륨 데이터는 핫 데이터가 되고 로컬 계층으로 자동으로 다시 이동될 때까지 클라우드 계층에 남아 있습니다.

+
데이터가 클라우드 계층으로 이동되지 않으므로 계층화 최소 냉각 기간은 적용되지 않으며 설정을 수정할 수 없습니다.

+
계층화 정책이 으로 설정된 볼륨의 콜드 블록입니다 `none` 읽으면 핫 데이터가 되고 로컬 계층에 기록됩니다.



'volume show' 명령 출력에는 볼륨의 계층화 정책이 표시됩니다. FabricPool에 사용된 적이 없는 볼륨은 출력에 "없음" 계층화 정책을 표시합니다.



== FabricPool에서 볼륨의 계층화 정책을 수정하면 어떻게 됩니까

볼륨 수정 작업을 수행하여 볼륨의 계층화 정책을 수정할 수 있습니다. 계층화 정책을 변경하면 데이터가 콜드 상태가 되어 클라우드 계층으로 이동하는 데 걸리는 시간이 영향을 받을 수 있음을 이해해야 합니다.

* 계층화 정책을 '스냅샷 전용' 또는 '사용 안 함'에서 '자동'으로 변경하면 ONTAP는 사용자 데이터 블록이 이전에 클라우드 계층에 적합하지 않은 경우에도 이미 사용 중인 파일 시스템의 사용자 데이터 블록을 클라우드 계층으로 전송합니다.
* 계층화 정책을 다른 정책에서 '모두'로 변경하면 ONTAP는 다음에 계층화 검사를 실행할 때 액티브 파일 시스템의 모든 사용자 블록과 스냅샷 복사본의 스냅샷 블록을 클라우드 계층으로 이동합니다.
+
블록을 성능 계층으로 다시 이동할 수 없습니다.

* 계층화 정책을 'auto'에서 'napshot-only' 또는 'none'으로 변경해도 이미 클라우드 계층으로 이동된 액티브 파일 시스템 블록이 성능 계층으로 다시 이동되는 것은 아닙니다.
+
데이터를 성능 계층으로 다시 이동하는 데 볼륨 읽기가 필요합니다.

* 볼륨에 대한 계층화 정책을 변경할 때마다 계층화 최소 냉각 기간이 정책의 기본값으로 재설정됩니다.




== 볼륨을 이동할 때 계층화 정책은 어떻게 됩니까

* 다른 계층화 정책을 명시적으로 지정하지 않는 한, FabricPool 지원 Aggregate와 그 외부로 이동할 때 볼륨은 원래 계층화 정책을 유지합니다.
+
하지만 계층화 정책은 볼륨이 FabricPool 지원 애그리게이트에 있을 때만 적용됩니다.

* 대상에 대해 다른 계층화 정책을 지정하지 않으면 볼륨에 대한 '-Tiering-Minimum-Cooling-Days' 매개 변수의 기존 값이 볼륨과 함께 이동합니다.
+
다른 계층화 정책을 지정하는 경우 볼륨은 해당 정책에 대한 기본 계층화 최소 냉각 기간을 사용합니다. 대상이 FabricPool인지 여부에 관계없이 이 경우가 해당됩니다.

* 애그리게이트 전체에서 볼륨을 이동하는 동시에 계층화 정책을 수정할 수 있습니다.
* 볼륨 이동 작업에 자동 계층화 정책이 포함되는 경우 특히 주의해야 합니다.
+
소스 및 타겟이 FabricPool 지원 애그리게이트라고 가정하면 다음 표에는 'auto'와 관련된 정책 변경이 포함된 '볼륨 이동' 작업의 결과가 요약되어 있습니다.

+
|===


| 계층화 정책이 다음과 같은 볼륨을 이동하는 경우 | 다음으로 이동하여 계층화 정책을 변경합니다. | 그런 다음 볼륨 이동 후... 


 a| 
모두
 a| 
자동
 a| 
모든 데이터가 성능 계층으로 이동됩니다.



 a| 
'냅샷 전용', '없음' 또는 '자동'으로 표시됩니다
 a| 
자동
 a| 
데이터 블록이 이전에 소스에 있었던 것과 동일한 대상 계층으로 이동합니다.



 a| 
자동 또는 모두
 a| 
'냅샷 전용'
 a| 
모든 데이터가 성능 계층으로 이동됩니다.



 a| 
자동
 a| 
모두
 a| 
모든 사용자 데이터가 클라우드 계층으로 이동됩니다.



 a| 
'스냅샷 전용', '자동' 또는 '모두'입니다
 a| 
"없음"
 a| 
모든 데이터는 성능 계층에 보관됩니다.

|===




== 볼륨을 클론 복제할 때 계층화 정책은 어떻게 됩니까

* ONTAP 9.8부터 클론 볼륨은 항상 계층화 정책과 클라우드 검색 정책을 상위 볼륨에서 상속합니다.
+
ONTAP 9.8 이전 릴리즈에서는 상위 계층에 '모두' 계층화 정책이 있는 경우를 제외하고 클론이 상위 계층으로부터 계층화 정책을 상속합니다.

* 상위 볼륨에 클라우드 검색 정책이 없는 경우 해당 클론 볼륨에 클라우드 검색 정책이 '사용 안 함' 또는 '모두' 계층화 정책, 해당 클라우드 검색 정책 '기본값'이 있어야 합니다.
* 모든 클론 볼륨에 클라우드 검색 정책이 '사용 안 함'으로 되어 있지 않으면 상위 볼륨 클라우드 검색 정책을 '사용 안 함'으로 변경할 수 없습니다.


볼륨을 복제할 때 다음 Best Practice를 염두에 두십시오.

* 클론의 `-Tiering-policy ' 옵션과 ' Tiering-Minimum-Cooling-Days ' 옵션은 클론에만 적용되는 블록의 계층화 동작만 제어합니다. 따라서 동일한 양의 데이터를 이동하거나 모든 클론보다 적은 데이터를 이동하는 상위 FlexVol의 계층화 설정을 사용하는 것이 좋습니다
* 상위 FlexVol의 클라우드 검색 정책은 동일한 양의 데이터를 이동하거나 모든 클론의 검색 정책보다 더 많은 데이터를 이동해야 합니다




== 계층화 정책이 클라우드 마이그레이션과 작동하는 방식

FabricPool 클라우드 데이터 검색은 읽기 패턴에 따라 클라우드 계층에서 성능 계층으로 데이터 검색을 결정하는 계층화 정책을 통해 제어됩니다. 읽기 패턴은 순차적이거나 무작위일 수 있습니다.

다음 표에는 각 정책의 계층화 정책과 클라우드 데이터 검색 규칙이 나와 있습니다.

|===


| 계층화 정책 | 검색 동작 


 a| 
없음
 a| 
순차적 읽기 및 랜덤 읽기



 a| 
스냅샷 전용
 a| 
순차적 읽기 및 랜덤 읽기



 a| 
자동
 a| 
랜덤 읽기



 a| 
모두
 a| 
데이터를 검색할 수 없습니다

|===
ONTAP 9.8부터 클라우드 마이그레이션 제어 '클라우드 검색 정책' 옵션은 계층화 정책에 의해 제어되는 기본 클라우드 마이그레이션 또는 검색 동작을 재정의합니다.

다음 표에는 지원되는 클라우드 검색 정책과 검색 동작이 나와 있습니다.

|===


| 클라우드 검색 정책 | 검색 동작 


 a| 
기본값
 a| 
계층화 정책은 어떤 데이터를 다시 풀어야 할지 결정하므로 "기본값", "클라우드 검색 정책"을 통해 클라우드 데이터 검색에 대한 변경 사항은 없습니다. 이 정책은 호스팅된 애그리게이트 유형에 관계없이 모든 볼륨의 기본값입니다.



 a| 
읽기
 a| 
모든 클라이언트 기반 데이터 읽기는 클라우드 계층에서 성능 계층으로 가져옵니다.



 a| 
안 함
 a| 
클라우드 계층에서 성능 계층으로 클라이언트 기반 데이터를 끌어오는 기능은 없습니다



 a| 
승격
 a| 
* 계층화 정책의 경우 ""없음"", 모든 클라우드 데이터가 클라우드 계층에서 성능 계층으로 풀링됩니다
* 계층화 정책의 경우, "스냅샷 전용", AFS 데이터가 풀링됩니다.


|===