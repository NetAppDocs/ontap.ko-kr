---
permalink: encryption-at-rest/manage-external-key-managers-sm-task.html 
sidebar: sidebar 
keywords: system manager, external key manager, configure external key manager, migrate keys, store keys, authentication keys, encryption keys 
summary: ONTAP 9.13.1 부터는 System Manager를 사용하여 외부 키 관리자를 관리하고 인증 및 암호화 키를 저장 및 관리할 수 있습니다. 
---
= System Manager로 외부 키 관리자를 관리합니다
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ONTAP 9.7부터 온보드 키 관리자를 사용하여 인증 및 암호화 키를 저장하고 관리할 수 있습니다. ONTAP 9.13.1부터는 외부 키 관리자를 사용하여 이러한 키를 저장하고 관리할 수도 있습니다.

Onboard Key Manager는 클러스터 내부의 보안 데이터베이스에 키를 저장하고 관리합니다. 범위는 클러스터입니다. 외부 키 관리자는 클러스터 외부에 키를 저장하고 관리합니다. 범위는 클러스터 또는 스토리지 VM일 수 있습니다. 하나 이상의 외부 키 관리자를 사용할 수 있습니다. 다음 조건이 적용됩니다.

* Onboard Key Manager가 활성화된 경우 클러스터 수준에서 외부 키 관리자를 활성화할 수 없지만 스토리지 VM 수준에서 설정할 수 있습니다.
* 외부 키 관리자가 클러스터 레벨에서 활성화된 경우 Onboard Key Manager를 활성화할 수 없습니다.


외부 키 관리자를 사용하는 경우 스토리지 VM 및 클러스터당 최대 4개의 기본 키 서버를 등록할 수 있습니다. 각 기본 키 서버는 최대 3개의 보조 키 서버로 클러스터링할 수 있습니다.



== 외부 키 관리자를 구성합니다

스토리지 VM에 대한 외부 키 관리자를 추가하려면 스토리지 VM에 대한 네트워크 인터페이스를 구성할 때 선택적 게이트웨이를 추가해야 합니다. 스토리지 VM이 네트워크 경로 없이 생성된 경우 외부 키 관리자에 대한 라우트를 명시적으로 생성해야 합니다. 을 참조하십시오 link:../networking/create_a_lif.html["LIF(네트워크 인터페이스) 생성"].

.단계
System Manager의 다양한 위치에서 외부 키 관리자를 구성할 수 있습니다.

. 외부 키 관리자를 구성하려면 다음 시작 단계 중 하나를 수행합니다.
+
[cols="25,25,50"]
|===


| 워크플로우 | 내비게이션 | 시작 단계 


 a| 
키 관리자를 구성합니다
 a| 
* 클러스터 * > * 설정 * 을 선택합니다
 a| 
보안 * 섹션으로 스크롤합니다. 암호화 * 에서 를 선택합니다 image:icon_gear.gif["설정 아이콘"]. 외부 키 관리자 * 를 선택합니다.



 a| 
로컬 계층을 추가합니다
 a| 
* 스토리지 * > * 계층 *
 a| 
Add Local Tier * 를 선택합니다. "키 관리자 구성" 확인란을 선택합니다. 외부 키 관리자 * 를 선택합니다.



 a| 
스토리지를 준비합니다
 a| 
* 대시보드 *
 a| 
Capacity * 섹션에서 * Prepare Storage * 를 선택합니다. 그런 다음 "키 관리자 구성"을 선택합니다. 외부 키 관리자 * 를 선택합니다.



 a| 
암호화 구성(스토리지 VM 범위의 키 관리자만 해당)
 a| 
스토리지 * > * 스토리지 VM *
 a| 
스토리지 VM을 선택합니다. 설정 * 탭을 선택합니다. 보안 * 의 * 암호화 * 섹션에서 을 선택합니다 image:icon_gear_blue_bg.png["설정 아이콘"].

|===
. 기본 키 서버를 추가하려면 을 선택합니다 image:icon_add.gif["추가 를 누릅니다"]를 입력하고 * IP 주소 또는 호스트 이름 * 및 * 포트 * 필드를 입력합니다.
. 기존에 설치된 인증서가 * KMIP Server CA Certificates * 및 * KMIP Client Certificate * 필드에 나열됩니다. 다음 작업 중 하나를 수행할 수 있습니다.
+
** 를 선택합니다 image:icon_dropdown_arrow.gif["풀다운 화살표"] 키 관리자에 매핑할 설치된 인증서를 선택합니다. (여러 서비스 CA 인증서를 선택할 수 있지만 하나의 클라이언트 인증서만 선택할 수 있습니다.)
** 아직 설치되지 않은 인증서를 추가하고 외부 키 관리자에 매핑하려면 * 새 인증서 추가 * 를 선택합니다.
** 를 선택합니다 image:icon-x-close.gif["X"] 인증서 이름 옆에 있는 을 클릭하여 외부 키 관리자에 매핑하지 않을 설치된 인증서를 삭제합니다.


. 보조 키 서버를 추가하려면 * 보조 키 서버 * 열에서 * 추가 * 를 선택하고 세부 정보를 제공합니다.
. 구성을 완료하려면 * 저장 * 을 선택하십시오.




== 기존 외부 키 관리자를 편집합니다

외부 키 관리자를 이미 구성한 경우 해당 설정을 수정할 수 있습니다.

.단계
. 외부 키 관리자 구성을 편집하려면 다음 시작 단계 중 하나를 수행합니다.
+
[cols="25,25,50"]
|===


| 범위 | 내비게이션 | 시작 단계 


 a| 
클러스터 범위 외부 키 관리자
 a| 
* 클러스터 * > * 설정 * 을 선택합니다
 a| 
보안 * 섹션으로 스크롤합니다. 암호화 * 에서 를 선택합니다 image:icon_kabob.gif["케밥 아이콘"]그런 다음 * 외부 키 관리자 편집 * 을 선택합니다.



 a| 
스토리지 VM 범위 외부 키 관리자
 a| 
스토리지 * > * 스토리지 VM *
 a| 
스토리지 VM을 선택합니다. 설정 * 탭을 선택합니다. 보안 * 의 * 암호화 * 섹션에서 을 선택합니다 image:icon_kabob.gif["케밥 아이콘"]그런 다음 * 외부 키 관리자 편집 * 을 선택합니다.

|===
. 기존 키 서버가 * Key Servers * 표에 나열되어 있습니다. 다음 작업을 수행할 수 있습니다.
+
** 를 선택하여 새 키 서버를 추가합니다 image:icon_add.gif["추가 를 누릅니다"].
** 를 선택하여 키 서버를 삭제합니다 image:icon_kabob.gif["케밥 아이콘"] 키 서버의 이름이 들어 있는 표 셀의 끝 부분. 해당 기본 키 서버와 연결된 보조 키 서버도 구성에서 제거됩니다.






== 외부 키 관리자를 삭제합니다

볼륨이 암호화되지 않은 경우 외부 키 관리자를 삭제할 수 있습니다.

.단계
. 외부 키 관리자를 삭제하려면 다음 단계 중 하나를 수행합니다.
+
[cols="25,25,50"]
|===


| 범위 | 내비게이션 | 시작 단계 


 a| 
클러스터 범위 외부 키 관리자
 a| 
* 클러스터 * > * 설정 * 을 선택합니다
 a| 
보안 * 섹션으로 스크롤합니다. 암호화 * 에서 선택 을 선택합니다 image:icon_kabob.gif["케밥 아이콘"]그런 다음 * 외부 키 관리자 삭제 * 를 선택합니다.



 a| 
스토리지 VM 범위 외부 키 관리자
 a| 
스토리지 * > * 스토리지 VM *
 a| 
스토리지 VM을 선택합니다. 설정 * 탭을 선택합니다. 보안 * 의 * 암호화 * 섹션에서 을 선택합니다 image:icon_kabob.gif["케밥 아이콘"]그런 다음 * 외부 키 관리자 삭제 * 를 선택합니다.

|===




== 키 관리자 간에 키를 마이그레이션합니다

클러스터에서 여러 키 관리자가 활성화된 경우 키를 한 키 관리자에서 다른 키 관리자로 마이그레이션해야 합니다. 이 프로세스는 System Manager에서 자동으로 완료됩니다.

* Onboard Key Manager 또는 외부 키 관리자가 클러스터 수준에서 활성화되어 있고 일부 볼륨이 암호화된 경우 그런 다음 스토리지 VM 수준에서 외부 키 관리자를 구성할 때 클러스터 수준에서 Onboard Key Manager 또는 외부 키 관리자에서 스토리지 VM 수준의 외부 키 관리자로 키를 마이그레이션해야 합니다. 이 프로세스는 System Manager에서 자동으로 완료됩니다.
* 스토리지 VM에서 암호화 없이 볼륨을 생성한 경우 키를 마이그레이션할 필요가 없습니다.

