---
sidebar: sidebar 
permalink: authentication/oauth2-deployment-scenarios.html 
keywords: oauth 2.0, deployment, configuration, parameters, local validation, remote introspection 
summary: ONTAP에 대한 인증 서버를 정의할 때 사용할 수 있는 몇 가지 구성 옵션이 있습니다. 이러한 옵션에 따라 몇 가지 배포 시나리오 중 하나를 사용하여 사용자 환경에 적합한 인증 서버를 정의할 수 있습니다. 
---
= OAuth 2.0 배포 시나리오
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ONTAP에 대한 인증 서버를 정의할 때 사용할 수 있는 몇 가지 구성 옵션이 있습니다. 이러한 옵션에 따라 몇 가지 배포 시나리오 중 하나를 사용하여 사용자 환경에 적합한 인증 서버를 정의할 수 있습니다.



== 구성 매개 변수 요약

ONTAP에 대한 인증 서버를 정의할 때 사용할 수 있는 몇 가지 구성 매개 변수가 있습니다. 이러한 매개 변수는 일반적으로 모든 관리 인터페이스에서 지원됩니다.


NOTE: 개별 매개 변수 또는 필드에 사용되는 이름은 ONTAP 관리 인터페이스에 따라 다를 수 있습니다. 관리 인터페이스의 차이를 수용하기 위해 테이블의 각 매개 변수에 하나의 일반 이름이 사용됩니다. 특정 인터페이스에 사용되는 정확한 이름은 컨텍스트에 따라 명확해야 합니다.

[cols="25,75"]
|===
| 매개 변수 | 설명 


| 이름 | ONTAP에 알려진 인증 서버의 이름입니다. 


| 응용 프로그램 | 정의가 적용되는 ONTAP 내부 응용 프로그램입니다. 이 값은 * http * 여야 합니다. 


| 발급자 URI입니다 | 토큰을 발급하는 사이트 또는 조직을 식별하는 경로가 있는 FQDN입니다. 


| 공급자 JWKS URI입니다 | ONTAP가 액세스 토큰의 유효성을 검사하는 데 사용되는 JSON 웹 키 세트를 가져오는 경로 및 파일 이름의 FQDN입니다. 


| JWKS 새로 고침 간격입니다 | ONTAP가 공급자 JWKS URI에서 인증서 정보를 새로 고치는 빈도를 결정하는 시간 간격입니다. 값은 ISO-8601 형식으로 지정됩니다. 


| 성찰의 끝점입니다 | ONTAP에서 자체 조사를 통해 원격 토큰 유효성 검사를 수행하는 데 사용하는 경로가 있는 FQDN입니다. 


| 클라이언트 ID입니다 | 인증 서버에 정의된 클라이언트의 이름입니다. 이 값이 포함된 경우 인터페이스를 기반으로 연결된 클라이언트 암호도 제공해야 합니다. 


| 발신 프록시 | 이는 ONTAP가 방화벽 뒤에 있을 때 인증 서버에 대한 액세스를 제공하기 위한 것입니다. URI는 curl 형식이어야 합니다. 


| 있는 경우 로컬 역할을 사용합니다 | 로컬 ONTAP 정의가 사용되는지 여부를 결정하는 부울 플래그(명명된 REST 역할 및 로컬 사용자 포함) 


| 원격 사용자 클레임 | ONTAP에서 로컬 사용자와 일치시키기 위해 사용하는 대체 이름입니다. 를 사용합니다 `sub` 로컬 사용자 이름과 일치하는 액세스 토큰의 필드입니다. 


| 대상 | 이 필드는 액세스 토큰을 사용할 수 있는 끝점을 정의합니다. 
|===


== 배포 시나리오

다음은 몇 가지 일반적인 배포 시나리오입니다. 토큰 유효성 검사는 ONTAP에서 로컬로 수행되는지 아니면 인증 서버에서 원격으로 수행되는지를 기준으로 구성됩니다. 각 시나리오에는 필요한 구성 옵션 목록이 포함되어 있습니다. 을 참조하십시오 link:../authentication/oauth2-deploy-ontap.html["ONTAP에 OAuth 2.0 배포"] 구성 명령의 예를 참조하십시오.


TIP: 인증 서버를 정의한 후 ONTAP 관리 인터페이스를 통해 구성을 표시할 수 있습니다. 예를 들어, 명령을 사용합니다 `security oauth2 client show` ONTAP CLI 사용.



=== 로컬 검증

다음 배포 시나리오는 토큰 유효성 검사를 로컬로 수행하는 ONTAP를 기반으로 합니다.

.프록시 없이 자체 포함된 범위를 사용합니다
이것은 OAuth 2.0 자체 포함 범위만 사용하는 가장 간단한 배포입니다. 로컬 ONTAP ID 정의는 사용되지 않습니다. 다음 매개 변수를 포함해야 합니다.

* 이름
* 응용 프로그램(http)
* 공급자 JWKS URI입니다
* 발급자 URI입니다


또한 인증 서버에 범위를 추가해야 합니다.

.프록시에 자체 포함된 범위를 사용합니다
이 배포 시나리오에서는 OAuth 2.0 자체 포함 범위를 사용합니다. 로컬 ONTAP ID 정의는 사용되지 않습니다. 하지만 인증 서버는 방화벽 뒤에 있으므로 프록시를 구성해야 합니다. 다음 매개 변수를 포함해야 합니다.

* 이름
* 응용 프로그램(http)
* 공급자 JWKS URI입니다
* 발신 프록시
* 발급자 URI입니다
* 대상


또한 인증 서버에 범위를 추가해야 합니다.

.프록시에 로컬 사용자 역할 및 기본 사용자 이름 매핑을 사용합니다
이 배포 시나리오에서는 기본 이름 매핑과 함께 로컬 사용자 역할을 사용합니다. 원격 사용자 클레임은 기본값인 을 사용합니다 `sub` 액세스 토큰의 이 필드는 로컬 사용자 이름과 일치시키는 데 사용됩니다. 사용자 이름은 40자 이하여야 합니다. 인증 서버는 방화벽 뒤에 있으므로 프록시를 구성해야 합니다. 다음 매개 변수를 포함해야 합니다.

* 이름
* 응용 프로그램(http)
* 공급자 JWKS URI입니다
* 있는 경우 로컬 역할을 사용합니다 (`true`)
* 발신 프록시
* 발급사


로컬 사용자가 ONTAP로 정의되었는지 확인해야 합니다.

.프록시를 사용하여 로컬 사용자 역할 및 대체 사용자 이름 매핑을 사용합니다
이 배포 시나리오에서는 로컬 ONTAP 사용자와 일치시키는 데 사용되는 대체 사용자 이름과 함께 로컬 사용자 역할을 사용합니다. 인증 서버는 방화벽 뒤에 있으므로 프록시를 구성해야 합니다. 다음 매개 변수를 포함해야 합니다.

* 이름
* 응용 프로그램(http)
* 공급자 JWKS URI입니다
* 있는 경우 로컬 역할을 사용합니다 (`true`)
* 원격 사용자 클레임
* 발신 프록시
* 발급자 URI입니다
* 대상


로컬 사용자가 ONTAP로 정의되었는지 확인해야 합니다.



=== 원격 자기 주도

다음 배포 구성은 ONTAP를 기반으로 합니다. 이 구성은 자체 조사를 통해 토큰 유효성 검사를 원격으로 수행합니다.

.프록시 없이 자체 포함된 범위를 사용합니다
OAuth 2.0 독립형 범위를 사용하여 간단하게 배포할 수 있습니다. ONTAP ID 정의는 사용되지 않습니다. 다음 매개 변수를 포함해야 합니다.

* 이름
* 응용 프로그램(http)
* 성찰의 끝점입니다
* 클라이언트 ID입니다
* 발급자 URI입니다


인증 서버에서 클라이언트 및 클라이언트 비밀은 물론 범위를 정의해야 합니다.
