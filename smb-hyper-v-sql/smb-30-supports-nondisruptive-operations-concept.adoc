---
permalink: smb-hyper-v-sql/smb-30-supports-nondisruptive-operations-concept.html 
sidebar: sidebar 
keywords: smb, functionality, support, nondisruptive, operations, shares, clients, hyper, v, sql, server 
summary: SMB 3.0은 SMB 공유를 통해 Hyper-V 및 SQL Server의 무중단 운영을 지원하는 중요한 기능을 제공합니다. 여기에는 지속적으로 사용 가능한 공유 속성과 SMB 클라이언트가 파일 열기 상태를 다시 확보하고 SMB 연결을 투명하게 다시 설정할 수 있도록 영구 핸들로 알려진 파일 핸들 유형이 포함됩니다. 
---
= SMB 3.0 기능이 SMB 공유에서 무중단 운영을 지원하는 방법
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SMB 3.0은 SMB 공유를 통해 Hyper-V 및 SQL Server의 무중단 운영을 지원하는 중요한 기능을 제공합니다. 여기에는 SMB 클라이언트가 파일 열기 상태를 재확보하고 SMB 연결을 투명하게 다시 설정할 수 있도록 하는 '연속 사용 가능' 공유 속성과 '영구 핸들'이라는 파일 핸들 유형이 포함됩니다.

지속적으로 사용 가능한 공유 속성 집합을 사용하여 공유에 연결하는 SMB 3.0 지원 클라이언트에 영구 핸들을 부여할 수 있습니다. SMB 세션의 연결이 끊기면 CIFS 서버는 영구 처리 상태에 대한 정보를 유지합니다. CIFS 서버는 클라이언트가 다시 연결될 수 있는 60초 동안 다른 클라이언트 요청을 차단하여, 영구 핸들이 있는 클라이언트가 네트워크 연결 해제 후 핸들을 다시 확보할 수 있도록 합니다. 핸들을 지속적으로 사용하는 클라이언트는 SVM(스토리지 가상 머신)의 데이터 LIF 중 하나를 사용하여 다시 연결할 수 있습니다. 즉, 동일한 LIF를 통해 다시 연결하거나 다른 LIF를 통해 다시 연결할 수 있습니다.

애그리게이트 재배치, 테이크오버 및 반환은 모두 SFO 쌍 간에 발생합니다. 영구 핸들이 있는 파일을 사용하여 세션의 분리 및 재연결을 원활하게 관리하기 위해 파트너 노드는 모든 영구 핸들 잠금 정보의 복사본을 유지 관리합니다. SFO 파트너는 이벤트의 계획인지 계획되지 않는지에 관계없이 영구 핸들 연결을 중단 없이 관리할 수 있습니다. 이 새로운 기능을 통해 CIFS 서버에 대한 SMB 3.0 연결이 예전부터 운영 중단 없이 할당된 SVM에 할당된 다른 데이터 LIF로 투명하게 페일오버할 수 있습니다.

영구 핸들을 사용하면 CIFS 서버가 SMB 3.0 연결을 투명하게 페일오버할 수 있지만 장애가 발생하여 Hyper-V 애플리케이션이 Windows Server 클러스터의 다른 노드로 페일오버될 경우 클라이언트는 연결이 끊어진 핸들의 파일 핸들을 다시 확보할 수 없습니다. 이 시나리오에서는 연결이 끊긴 상태의 파일 핸들이 다른 노드에서 다시 시작될 경우 Hyper-V 응용 프로그램의 액세스를 차단할 수 있습니다. ""장애 조치 클러스터링""은 SMB 3.0의 일부이며, 이러한 시나리오를 해결하기 위해 오래되고 충돌하는 핸들을 무효화하는 메커니즘을 제공합니다. 이 메커니즘을 사용하면 Hyper-V 클러스터 노드에 장애가 발생할 경우 Hyper-V 클러스터가 신속하게 복구될 수 있습니다.
