---
permalink: smb-hyper-v-sql/odx-copy-offload-concept.html 
sidebar: sidebar 
keywords: offload, data, transfer, odx, copy, application, server, copy, operation 
summary: '복사 오프로드라고도 하는 오프로드 데이터 전송(ODX)을 사용하면 호스트 컴퓨터를 통해 데이터를 전송하지 않고도 호환되는 스토리지 장치 내부 또는 간에 데이터를 직접 전송할 수 있습니다. ONTAP ODX 복사 오프로드를 사용하면 SMB 설치를 통해 애플리케이션 서버에서 복사 작업을 수행할 때 성능 이점을 얻을 수 있습니다.' 
---
= SMB 공유를 통해 Hyper-V 및 SQL Server에서 ODX 복사 오프로드를 사용하는 방법
:icons: font
:imagesdir: ../media/


[role="lead"]
ODX(Offloaded Data Transfer)는 _copy offload_라고도 하며 호스트 컴퓨터를 통해 데이터를 전송하지 않고도 호환되는 스토리지 장치 내부 또는 간에 직접 데이터를 전송할 수 있습니다. ONTAP ODX 복사 오프로드를 사용하면 SMB 설치를 통해 애플리케이션 서버에서 복사 작업을 수행할 때 성능 이점을 얻을 수 있습니다.

ODX가 아닌 파일 전송에서는 소스 CIFS 서버에서 데이터를 읽고 네트워크를 통해 클라이언트 컴퓨터로 전송합니다. 클라이언트 컴퓨터는 네트워크를 통해 대상 CIFS 서버로 데이터를 다시 전송합니다. 요약하면 클라이언트 컴퓨터는 소스에서 데이터를 읽고 대상에 씁니다. ODX 파일 전송을 사용하면 데이터가 소스에서 타겟으로 직접 복사됩니다.

오프로드 복사본은 소스 및 타겟 스토리지 간에 직접 수행되므로 성능이 크게 향상됩니다. 소스 및 대상 간의 복제 시간 단축, 클라이언트의 리소스 활용률(CPU, 메모리) 감소, 네트워크 I/O 대역폭 사용률 감소 등의 성능 이점을 얻을 수 있습니다.

이 기능은 Windows Server 2012 서버에서 사용할 수 있습니다. ONTAP ODX 복사 오프로드는 SAN LUN과 SMB 3.0 상시 연결 모두에서 지원됩니다.

ODX 복사 및 이동 사용을 지원하는 사용 사례는 다음과 같습니다.

* 체내
+
소스 및 대상 파일 또는 LUN이 동일한 볼륨 내에 있습니다.

* 볼륨 간, 동일한 노드, 동일한 SVM(스토리지 가상 머신)
+
소스 및 대상 파일 또는 LUN이 동일한 노드에 있는 다른 볼륨에 있습니다. 데이터는 동일한 SVM이 소유합니다.

* 볼륨 간, 다른 노드, 동일한 SVM
+
소스 및 대상 파일 또는 LUN이 서로 다른 노드에 있는 서로 다른 볼륨에 있습니다. 데이터는 동일한 SVM이 소유합니다.

* SVM 간, 동일한 노드
+
소스 및 대상 파일 또는 LUN이 동일한 노드에 있는 서로 다른 볼륨에 있습니다. 데이터는 서로 다른 SVM에서 소유합니다.

* SVM 간, 다른 노드
+
소스 및 대상 파일 또는 LUN이 서로 다른 노드에 있는 서로 다른 볼륨에 있습니다. 데이터는 서로 다른 SVM에서 소유합니다.



Hyper-V 솔루션을 사용한 ODX 복사 오프로드의 구체적인 사용 사례는 다음과 같습니다.

* Hyper-V에서 ODX 복사 오프로드 패스스스루 를 사용하여 VHD(가상 하드 디스크) 파일 내부 또는 VHD 파일 간에 데이터를 복사하거나, 매핑된 SMB 공유와 동일한 클러스터 내에서 연결된 iSCSI LUN 간에 데이터를 복사할 수 있습니다.
+
이렇게 하면 게스트 운영 체제에서 복제본을 기본 스토리지로 전달할 수 있습니다.

* 고정 크기의 VHD를 생성할 때 ODX는 잘 알려진 제로화 토큰을 사용하여 0으로 디스크를 초기화하는 데 사용됩니다.
* 소스 및 타겟 스토리지가 동일한 클러스터에 있는 경우 ODX 복사 오프로드가 가상 머신 스토리지 마이그레이션에 사용됩니다.


[NOTE]
====
Hyper-V를 사용한 ODX 복사 오프로드 패스쓰루 사용 사례를 활용하려면 게스트 운영 체제가 ODX를 지원하고, 게스트 운영 체제 디스크는 ODX를 지원하는 스토리지(SMB 또는 SAN)를 통해 지원되는 SCSI 디스크여야 합니다. 게스트 운영 체제의 IDE 디스크는 ODX 패스스스루 를 지원하지 않습니다.

====
SQL Server 솔루션을 사용한 ODX 복사 오프로드의 구체적인 사용 사례는 다음과 같습니다.

* ODX 복사 오프로드 를 사용하여 매핑된 SMB 공유 간에 또는 동일한 클러스터 내에서 SMB 공유와 연결된 iSCSI LUN 간에 SQL Server 데이터베이스를 내보내고 가져올 수 있습니다.
* 소스 및 타겟 스토리지가 동일한 클러스터에 있는 경우 ODX 복사 오프로드를 사용하여 데이터베이스를 내보내고 가져올 수 있습니다.

